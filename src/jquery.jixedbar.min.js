/*
 * jixedbar - a jQuery fixed bar plugin.
 * http://code.google.com/p/jixedbar/
 *
 * Version 0.0.5 (Development)
 *
 * Copyright (c) 2009-2010 Ryan Yonzon, http://ryan.rawswift.com/
 * Copyright (c) 2011 Sumh (42424861@qq.com)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Last update - Dec 11, 2011
 */
 (function(a){a.extend({jixedbar:new function(b){var c={constOverflow:"hidden",constBottom:"0px"},d={showOnTop:false,transparent:false,opacity:.9,opaqueSpeed:"fast",slideSpeed:"fast",roundedCorners:true,roundedButtons:true,menuFadeSpeed:250,tooltipFadeSpeed:"slow",tooltipFadeOpacity:.8},b=a.extend(d,b),e=a.browser.msie&&parseInt(a.browser.version,10)==6,f=a.browser.msie&&parseInt(a.browser.version,10)==7,g=false,h="",i;this.construct=function(){return this.each(function(){var b=a(this),j=jQuery(this),k=j.width(),l=k/2*1,m=false,n=a.browser.msie&&(e||f)?"absolute":"fixed",o=d.showOnTop?"jx-hide-top":"jx-hide",p=d.showOnTop?"jx-show-button-top":"jx-show-button";i=b;if(b.checkCookie("JXID")){if(b.readCookie("JXHID")=="true"){this.hideBar=true}}else{b.createCookie("JXID",b.genRandID());b.createCookie("JXHID",false)}if(a.browser.msie&&(e||f)){a("html").css({overflow:"hidden",height:"100%"});a("body").css({margin:"0px",overflow:"auto",height:"100%"})}else{a("html").css({height:"100%"});a("body").css({margin:"0px",height:"100%"})}if(a(".jx-bar-button-right",this).exists()){a("<ul />",{id:"jx-hid-con-id","class":"jx-bar-button-right"}).insertBefore(b.find(".jx-bar-button-right:first"))}else{a("<ul />",{id:"jx-hid-con-id","class":"jx-bar-button-right"}).appendTo(this)}if(a.browser.msie){if(e)a("#jx-hid-con-id").css({width:"1px","float":"right"});else if(f)a("#jx-hid-con-id").css({width:"40px","float":"right"})}a("#jx-hid-con-id").html('<li alt="Hide toolbar"><a id="jx-hid-btn-id" class="'+o+'"></a></li>');a("<span />",{id:"jx-hid-sep-id","class":"jx-hide-separator"}).insertAfter("#jx-hid-con-id");a("#jx-hid-btn-id").parent().click(function(){a("#jx-menu-con-id").fadeOut();b.slideToggle(d.slideSpeed,function(){b.createCookie("JXHID",true);if(!b.checkCookie("JXID")){b.createCookie("JXID",b.genRandID())}a("#jx-uhid-con-id").slideToggle(d.slideSpeed)});return false});b.css({overflow:c["constOverflow"],position:n});if(d.showOnTop){b.css({top:c["constBottom"]})}else{b.css({bottom:c["constBottom"]})}b.addClass("jx-bar");if(d.roundedCorners){if(d.showOnTop){b.addClass("jx-bar-rounded-bl jx-bar-rounded-br")}else{b.addClass("jx-bar-rounded-tl jx-bar-rounded-tr")}}b.addClass("jx-bar-button");if(d.roundedButtons){b.addClass("jx-bar-button-rounded")}marginLeft=l-b.width()/2;b.css({"margin-left":marginLeft});a("img",b).css({"vertical-align":"bottom",border:"#fff solid 0px"});b.find("img").each(function(){if(b.attr("alt")){altName=" "+b.attr("alt");b.parent().append(altName)}});if(d.transparent){b.fadeTo(d.opaqueSpeed,d.opacity)}a("<div />",{id:"jx-menu-con-id"}).appendTo("body");if(d.transparent){a("#jx-menu-con-id").fadeTo(d.opaqueSpeed,d.opacity)}a("<div />",{id:"jx-uhid-con-id","class":"jx-show jx-bar-button",css:{overflow:c["constOverflow"],position:n,"margin-left":b.offset().left+b.width()-a("#jx-uhid-con-id").width()}}).appendTo("body");if(d.showOnTop){a("#jx-uhid-con-id").css({top:c["constBottom"]})}else{a("#jx-uhid-con-id").css({bottom:c["constBottom"]})}if(d.transparent){a("#jx-uhid-con-id").fadeTo(d.opaqueSpeed,d.opacity)}if(this.hideBar){b.css({display:"none"})}if(!this.hideBar){a("#jx-uhid-con-id").css({display:"none"})}a("<ul />",{id:"jx-uhid-itm-id",html:'<li alt="Show toolbar"><a id="jx-uhid-btn-id" class="'+p+'"></a></li>'}).appendTo("#jx-uhid-con-id");if(d.roundedCorners){if(d.showOnTop){a("#jx-uhid-con-id").addClass("jx-bar-rounded-bl jx-bar-rounded-br")}else{a("#jx-uhid-con-id").addClass("jx-bar-rounded-tl jx-bar-rounded-tr")}}if(d.roundedButtons){a("#jx-uhid-con-id").addClass("jx-bar-button-rounded")}a("#jx-uhid-con-id").click(function(){a(this).slideToggle(d.slideSpeed,function(){b.createCookie("JXHID",false);if(!b.checkCookie("JXID")){b.createCookie("JXID",b.genRandID())}b.slideToggle(d.slideSpeed);if(h){a("#jx-menu-con-id").fadeIn()}a("#jx-uhid-con-id").css({"margin-left":b.offset().left+b.width()-a("#jx-uhid-con-id").width()});if(g){a("#jx-menu-con-id").css({"margin-left":a("#"+h).parent().offset().left})}});return false});a("<div />",{id:"jx-ttip-con-id",css:{height:"auto","margin-left":"0px",width:"100%",overflow:c["constOverflow"],position:n}}).appendTo("body");if(d.showOnTop){a("#jx-ttip-con-id").css({"margin-top":b.height()+6,top:c["constBottom"]})}else{a("#jx-ttip-con-id").css({"margin-bottom":b.height()+6,bottom:c["constBottom"]})}a("li",b).each(function(){var b=a(this).attr("title");if(b){a(this).removeAttr("title").attr("alt",b)}});a("li",b).hover(function(){var b=a(this),c=b.attr("id")+"jx-ttip-id",f=b.attr("title")||b.attr("alt"),i;if(f){barTooltipWrapperID=c+"_wrapper";a("<div />",{id:barTooltipWrapperID}).appendTo("#jx-ttip-con-id");a("<div />",{id:c}).appendTo("#"+barTooltipWrapperID);a("#"+c).css({"float":"left"});if(d.showOnTop&&!(a.browser.msie&&e)){a("<div />",{"class":"jx-tool-point-dir-up"}).appendTo("#"+c)}else{a("<div />",{html:f,"class":"jx-bar-button-tooltip"}).appendTo("#"+c)}if(!d.showOnTop&&!(a.browser.msie&&e)){a("<div />",{"class":"jx-tool-point-dir-down"}).appendTo("#"+c)}lft_pad=parseInt(b.css("padding-left"));a("#"+barTooltipWrapperID).css({"margin-left":b.offset().left-a("#"+c).width()/2+b.width()/2+lft_pad});if(!b.find("a:first").prop("name")||g==false){a("#"+c).fadeTo(d.tooltipFadeSpeed,d.tooltipFadeOpacity)}else if(h!==b.find("a:first").prop("name")){a("#"+c).fadeTo(d.tooltipFadeSpeed,d.tooltipFadeOpacity)}else{a("#"+c).css({display:"none"})}}},function(){var b=a(this).attr("id"),c=b+"jx-ttip-id_wrapper";a("#"+c).remove()});a("li",a("#jx-uhid-con-id")).hover(function(){var b=a(this),c=b.prop("id")+"jx-ttip-id",f=b.attr("title")||b.attr("alt"),i,j;if(f){i=c+"_wrapper";a("<div />",{id:i}).appendTo("#jx-ttip-con-id");a("<div />",{id:c,style:"float:left"}).appendTo("#"+i);if(d.showOnTop&&!(a.browser.msie&&e)){a("<div />",{"class":"jx-tool-point-dir-up"}).appendTo("#"+c)}else{a("<div />",{html:f,"class":"jx-bar-button-tooltip"}).appendTo("#"+c)}if(!d.showOnTop&&!(a.browser.msie&&e)){a("<div />",{"class":"jx-tool-point-dir-down"}).appendTo("#"+c)}j=parseInt(b.css("padding-left"));a("#"+i).css({"margin-left":b.offset().left-a("#"+c).width()/2+b.width()/2+j});if(b.find("a:first").prop("name")==""||g==false){a("#"+c).fadeTo(d.tooltipFadeSpeed,d.tooltipFadeOpacity)}else if(h!=b.find("a:first").prop("name")){a("#"+c).fadeTo(d.tooltipFadeSpeed,d.tooltipFadeOpacity)}else{a("#"+c).css({display:"none"})}}},function(){var b=a(this).prop("id"),c=b+"jx-ttip-id_wrapper";a("#"+c).remove()});if(a.browser.msie&&e){a(this).find("li").each(function(){a(this).find("img").each(function(){var b=a(this),c=b.prop("src"),d=b.prop("alt"),e=b.parent();if(!d){d="  "+b.prop("title")}e.html("<span style=\"cursor:pointer;display:inline-block;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+c+"');\">"+e.html()+"</span> "+d);b.attr("style","filter:progid:DXImageTransform.Microsoft.Alpha(opacity=0);")})})}a(window).resize(function(){var c=jQuery(this),d=c.width(),e=d/2*1,f=e-b.width()/2;b.css({"margin-left":f});a("#jx-uhid-con-id").css({"margin-left":b.offset().left+b.width()-a("#jx-uhid-con-id").width()});if(g){a("#jx-menu-con-id").css({"margin-left":a("#"+h).parent().offset().left})}});a("li",b).find("ul").each(function(){a(this).css({display:"none"})});a("li",b).find("ul").each(function(i){var j=a(this),k=j.parent(),l=d.showOnTop?"jx-arrow-down":"jx-arrow-up";j.prop("id","nav"+i);k.find("a:first").prop({href:"#",name:"nav"+i});if(a.browser.msie&&(e||f)){a("<div />",{"class":l,style:"background-position:top"}).insertBefore(k.find("a"))}else{a("<div />",{"class":l}).insertAfter(k.find("a"))}k.find("a:first").click(function(){var f=a(this),i=a(this).parent(),j=f.prop("id")+"jx-ttip-id_wrapper";a("#"+j).remove();if(g&&h==f.prop("name")){if(d.showOnTop){l="jx-arrow-down"}else{l="jx-arrow-up"}i.find("div").prop("class",l);a("#jx-menu-con-id").fadeOut(d.menuFadeSpeed);i.removeClass("jx-nav-menu-active");if(d.roundedButtons){i.removeClass("jx-nav-menu-active-rounded")}g=false;h="";f.blur()}else{if(d.showOnTop){l="jx-arrow-up"}else{l="jx-arrow-down"}i.find("div").prop("class",l);a("#jx-menu-con-id").html("<ul>"+i.find("ul").html()+"</ul>").css({display:"none",overflow:c["constOverflow"],position:n,"margin-left":i.offset().left});if(d.showOnTop){a("#jx-menu-con-id").css({top:c["constBottom"],"margin-top":b.height()+6})}else{a("#jx-menu-con-id").css({bottom:c["constBottom"],"margin-bottom":b.height()+6})}a("#jx-menu-con-id").addClass("jx-nav-menu");if(a.browser.msie&&e){a("#jx-menu-con-id ul li a").css({width:"100%"})}if(d.roundedButtons){a("#jx-menu-con-id").addClass("jx-nav-menu-rounded")}i.addClass("jx-nav-menu-active");if(d.roundedButtons){i.addClass("jx-nav-menu-active-rounded")}if(h){if(d.showOnTop){l="jx-arrow-down"}else{l="jx-arrow-up"}a("a[name='"+h+"']").parent().removeClass("jx-nav-menu-active jx-nav-menu-active-rounded").find("div").prop("class",l)}g=true;h=f.prop("name");f.blur();a("#jx-menu-con-id").fadeIn(d.menuFadeSpeed)}return false})});a("li",b).click(function(){if(a("ul",this).exists()){a(this).find("a:first").click();return false}else if(a(this).parent().prop("id")=="jx-hid-con-id"){return false}if(a("a",this).exists()){window.location=a(this).find("a:first").prop("href")}return false})})};this.getOptions=function(){return b};this.isIE6=function(){return e};this.isIE7=function(){return f};this.hasActiveButton=function(){return g};this.getActiveButtonName=function(){return h};this.getTooltipObject=function(){return a("#jx-ttip-con-id")};this.createObjectContainer=function(b){b=typeof b!="undefined"?b:"jx-obj-con-id";var e=a("<div />",{id:b,css:{height:"auto","margin-left":"0px",width:"100%",overflow:c["constOverflow"],position:pos}}).appendTo("body");if(d.showOnTop){e.css({"margin-top":i.height()+6,top:c["constBottom"]})}else{e.css({"margin-bottom":i.height()+6,bottom:c["constBottom"]})}return e}}});a.fn.extend({jixedbar:a.jixedbar.construct})})(jQuery);jQuery.fn.exists=function(){return!!this.length};jQuery.fn.createCookie=function(a,b){var c=new Date(2037,1,1);document.cookie=a+"="+escape(b)+";expires="+c.toUTCString()};jQuery.fn.checkCookie=function(a){if(document.cookie.length>0){cookie_start=document.cookie.indexOf(a+"=");if(cookie_start!=-1){cookie_start=cookie_start+a.length+1;cookie_end=document.cookie.indexOf(";",cookie_start);if(cookie_end==-1){cookie_end=document.cookie.length;return true}}}return false};jQuery.fn.extractCookieValue=function(a){if((endOfCookie=document.cookie.indexOf(";",a))==-1){endOfCookie=document.cookie.length}return unescape(document.cookie.substring(a,endOfCookie))};jQuery.fn.readCookie=function(a){var b=document.cookie.length;var c=a+"=";var d=c.length;var e=0;while(e<=b){var f=e+d;if(document.cookie.substring(e,f)==c)return this.extractCookieValue(f);e=document.cookie.indexOf(" ",e)+1;if(e==0){break}}return null};jQuery.fn.genRandID=function(){var a="";var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var c=0;c<24;c++){a+=b.charAt(Math.floor(Math.random()*b.length))}return a}